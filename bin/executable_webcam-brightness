#!/bin/sh

operation=$1
curval=$(v4l2-ctl -C "exposure_absolute" | cut -d: -f2 | tr -d ' ')

case $operation in
  reset)
    v4l2-ctl -c "brightness=0"
    v4l2-ctl -c "contrast=0"
    v4l2-ctl -c "saturation=64"
    v4l2-ctl -c "hue=0"
    v4l2-ctl -c "white_balance_temperature_auto=1"
    v4l2-ctl -c "gamma=100"
    v4l2-ctl -c "gain=1"
    v4l2-ctl -c "power_line_frequency=1"
    v4l2-ctl -c "white_balance_temperature=4600"
    v4l2-ctl -c "sharpness=2"
    v4l2-ctl -c "backlight_compensation=3"
    v4l2-ctl -c "exposure_auto=3"
    v4l2-ctl -c "exposure_absolute=156"
    v4l2-ctl -c "exposure_auto_priority=0"
    ;;
  up)
    newval=$(($curval+10))
    v4l2-ctl -c "exposure_auto=1"
    v4l2-ctl -c "exposure_absolute=$newval"
    ;;
  down)
    newval=$(($curval-10))
    v4l2-ctl -c "exposure_auto=1"
    v4l2-ctl -c "exposure_absolute=$newval"
    ;;
  ''|*[!0-9]*)
    echo "Incorrect operation attribute"
    exit 1
    ;;
  *)
    newval=$operation
    ;;
esac

[colors]
background = #282A36
foreground = #F8F8F2
highlight  = #BD93F9
inactive   = #6272A4
error      = #FF5555
purple     = #FF79C6

[bar/main]
width = 100%
height = 28
background = ${colors.background}
foreground = ${colors.foreground}
font-0 = "DejaVu Sans:size=11;2"
font-1 = "Symbols Nerd Font:size=13;2"
font-2 = "Noto Color Emoji:size=13;2"
modules-left = i3
modules-center = date
modules-right = battery cpu memory disk pulse_out pulse_in warp notify screensaver keyboard tray
monitor = ${env:MONITOR:}
separator = |
separator-padding = 2
enable-ipc = true

[bar/main-no-tray]
width = 100%
height = 28
background = ${colors.background}
foreground = ${colors.foreground}
font-0 = "DejaVu Sans:size=11;2"
font-1 = "Symbols Nerd Font:size=13;2"
modules-left = i3
modules-center = date
modules-right = battery cpu memory disk pulse_out pulse_in warp notify screensaver keyboard
monitor = ${env:MONITOR:}
separator = |
separator-padding = 2
enable-ipc = true

[module/i3]
type = internal/i3
pin-workspaces = true
label-padding = 2
label-focused = %index%
label-focused-background = ${colors.purple}
label-focused-foreground = ${colors.background}
label-focused-padding = 3
label-unfocused = %index%
label-unfocused-foreground = ${colors.inactive}
label-unfocused-padding = 3
label-visible = %index%
label-visible-background = ${colors.inactive}
label-visible-foreground = ${colors.foreground}
label-visible-padding = 3
label-urgent = %index%
label-urgent-background = ${colors.error}
label-urgent-padding = 3

[module/date]
type = custom/script
exec = date '+%Y-%m-%d %H:%M'
interval = 1
click-left = gsimplecal

[module/battery]
type = internal/battery
battery = BAT0
adapter = AC
poll-interval = 5
format-charging = <animation-charging> <label-charging>
format-discharging = <animation-discharging> <label-discharging>
label-charging = Charging %percentage%%
label-discharging = Discharging %percentage%%
label-full = Fully charged
label-low = BATTERY LOW
ramp-capacity-0 = 
ramp-capacity-1 = 
ramp-capacity-2 = 
ramp-capacity-3 = 
ramp-capacity-4 = 
animation-charging-0 = 
animation-charging-1 = 
animation-charging-2 = 
animation-charging-3 = 
animation-charging-4 = 
animation-charging-framerate = 750
animation-discharging-0 = 
animation-discharging-1 = 
animation-discharging-2 = 
animation-discharging-3 = 
animation-discharging-4 = 
animation-discharging-framerate = 500

[module/cpu]
type = internal/cpu
interval = 2
warn-percentage = 80
format = <label>
format-warn = <label-warn>
label = %{A1:kitty --class=floating htop:}CPU %percentage%%%{A}
label-warn = %{A1:kitty --class=floating htop:}%{F#FFB86C}CPU %percentage%%%{F-}%{A}

[module/memory]
type = internal/memory
interval = 2
warn-percentage = 85
format = <label>
format-warn = <label-warn>
label = %{A1:kitty --class=floating htop:}RAM %percentage_used%%%{A}
label-warn = %{A1:kitty --class=floating htop:}%{F#FFB86C}RAM %percentage_used%%%{F-}%{A}

[module/pulse_out]
type = custom/ipc
exec = ~/.config/polybar/scripts/pulse_status.sh sink
initial = 1
hook-0 = ~/.config/polybar/scripts/pulse_status.sh sink
click-left  = pactl set-sink-mute @DEFAULT_SINK@ toggle
scroll-up   = pactl set-sink-volume @DEFAULT_SINK@ +2%
scroll-down = pactl set-sink-volume @DEFAULT_SINK@ -2%
click-right = kitty --class=floating pulsemixer

[module/pulse_in]
type = custom/ipc
exec = ~/.config/polybar/scripts/pulse_status.sh source
initial = 1
hook-0 = ~/.config/polybar/scripts/pulse_status.sh source
click-left  = pactl set-source-mute @DEFAULT_SOURCE@ toggle
scroll-up   = pactl set-source-volume @DEFAULT_SOURCE@ +2%
scroll-down = pactl set-source-volume @DEFAULT_SOURCE@ -2%
click-right = kitty --class=floating pulsemixer

[module/warp]
type = custom/script
exec = ~/.config/polybar/scripts/warp-status.sh
interval = 5
label-font = 2
click-left = ~/.config/polybar/scripts/warp-toggle.sh

[module/notify]
type = custom/ipc
exec = ~/.config/polybar/scripts/notify.sh
initial = 1
label-font = 2
hook-0 = ~/.config/polybar/scripts/notify.sh
click-left = dunstctl set-paused toggle && polybar-msg action "#notify.hook.0"

[module/screensaver]
type = custom/ipc
exec = ~/.config/polybar/scripts/screensaver.sh
initial = 1
label-font = 2
hook-0 = ~/.config/polybar/scripts/screensaver.sh
click-left = ~/bin/screensaver-toggle.sh && polybar-msg action "#screensaver.hook.0"

[module/disk]
type = custom/script
exec = ~/.config/polybar/scripts/disk_usage.sh
interval = 30
click-left = kitty --class=floating -e bash -c 'df -h -t ext4 -t xfs -t btrfs -t ext3 -t ext2; echo; echo "Press Enter to close..."; read'

[module/keyboard]
type = custom/script
exec = ~/.config/polybar/scripts/keyboard-layout.sh
interval = 3

[module/tray]
type = internal/tray
